<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C-Agent - 智能C语言助手</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div id="app">
        <!-- 导航栏 -->
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-brand">
                    <i class="fas fa-code"></i>
                    <span>C-Agent</span>
                </div>
                <div class="nav-menu">
                    <div class="nav-item active" data-tab="chat">
                        <i class="fas fa-comments"></i>
                        <span data-lang-key="nav-chat">聊天</span>
                    </div>
                    <div class="nav-item" data-tab="help">
                        <i class="fas fa-question-circle"></i>
                        <span data-lang-key="nav-help">帮助</span>
                    </div>
                    <div class="nav-item" data-tab="similarity">
                        <i class="fas fa-search"></i>
                        <span data-lang-key="nav-similarity">查重</span>
                    </div>
                    <div class="nav-item" data-tab="history">
                        <i class="fas fa-history"></i>
                        <span data-lang-key="nav-history">历史</span>
                    </div>
                    <div class="nav-item" data-tab="settings">
                        <i class="fas fa-cog"></i>
                        <span data-lang-key="nav-settings">设置</span>
                    </div>
                </div>
                <div class="language-switch">
                    <button id="languageToggle" class="language-btn">
                        <span id="currentLang">中文</span>
                        <i class="fas fa-globe"></i>
                    </button>
                </div>
            </div>
        </nav>

        <!-- 主内容区域 -->
        <main class="main-content">
            <!-- AI聊天界面 -->
            <div class="tab-content active" id="chat-tab">
                <div class="chat-container">
                    <div class="chat-header">
                        <h2 data-lang-key="chat-title">与AI助手聊天</h2>
                        <p data-lang-key="chat-subtitle">Lynn是一个智能的程序编程助手，擅长解答各种编程问题</p>
                    </div>
                    <div class="chat-messages" id="chatMessages">
                        <div class="message assistant">
                            <div class="message-avatar">
                                <i class="fas fa-robot"></i>
                            </div>
                            <div class="message-content">
                                <span data-lang-key="welcome-message">你好！我是Lynn，你的编程助手。有什么我可以帮助你的吗？</span>
                            </div>
                        </div>
                    </div>
                    <div class="chat-input-area">
                        <div class="input-container">
                            <textarea id="chatInput" placeholder="输入你的问题..." rows="3"></textarea>
                            <button id="sendButton" class="send-btn">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- C语言帮助界面 -->
            <div class="tab-content" id="help-tab">
                <div class="help-container">
                    <div class="help-header">
                        <h2 data-lang-key="help-title">C语言帮助</h2>
                        <p data-lang-key="help-subtitle">查询C语言关键字、语法和头文件说明</p>
                    </div>
                    <div class="help-search">
                        <div class="search-box">
                            <input type="text" id="helpInput" placeholder="输入关键字、语句或头文件名...">
                            <button id="helpSearchBtn" class="search-btn">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                    </div>
                    <div class="help-results" id="helpResults">
                        <div class="help-placeholder">
                            <i class="fas fa-lightbulb"></i>
                            <p data-lang-key="help-placeholder">请输入要查询的内容</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 代码相似度检测界面 -->
            <div class="tab-content" id="similarity-tab">
                <div class="similarity-container">
                    <div class="similarity-header">
                        <h2 data-lang-key="similarity-title">代码查重</h2>
                        <p data-lang-key="similarity-subtitle">上传两个C语言文件，检测代码相似度</p>
                    </div>
                    <form id="similarityForm" class="similarity-form">
                        <div class="file-upload-area">
                            <div class="file-upload">
                                <label for="file1" class="file-label">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <span data-lang-key="upload-file1">选择第一个文件</span>
                                </label>
                                <input type="file" id="file1" accept=".c,.txt" required>
                                <div class="file-info" id="file1Info"></div>
                            </div>
                            <div class="vs-indicator">
                                <span>VS</span>
                            </div>
                            <div class="file-upload">
                                <label for="file2" class="file-label">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <span data-lang-key="upload-file2">选择第二个文件</span>
                                </label>
                                <input type="file" id="file2" accept=".c,.txt" required>
                                <div class="file-info" id="file2Info"></div>
                            </div>
                        </div>
                        <button type="submit" class="analyze-btn" id="analyzeBtn">
                            <i class="fas fa-analytics"></i>
                            <span data-lang-key="analyze-btn">分析相似度</span>
                        </button>
                    </form>
                    
                    <!-- 代码预览区域 -->
                    <div class="code-preview-section" id="codePreviewSection" style="display: none;">
                        <div class="preview-header">
                            <h3 data-lang-key="code-preview-title">代码预览</h3>
                            <div class="preview-controls">
                                <button id="togglePreview" class="toggle-btn">
                                    <i class="fas fa-eye"></i>
                                    <span data-lang-key="toggle-preview">隐藏预览</span>
                                </button>
                            </div>
                        </div>
                        <div class="code-preview-container">
                            <div class="code-preview-panel">
                                <div class="panel-header">
                                    <i class="fas fa-file-code"></i>
                                    <span id="file1Name" data-lang-key="file1-preview">文件1</span>
                                </div>
                                <div class="code-content">
                                    <pre><code class="language-c" id="code1Content"></code></pre>
                                </div>
                            </div>
                            <div class="code-preview-panel">
                                <div class="panel-header">
                                    <i class="fas fa-file-code"></i>
                                    <span id="file2Name" data-lang-key="file2-preview">文件2</span>
                                </div>
                                <div class="code-content">
                                    <pre><code class="language-c" id="code2Content"></code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="similarity-results" id="similarityResults">
                        <!-- 结果将动态插入这里 -->
                    </div>
                </div>
            </div>

            <!-- 历史记录界面 -->
            <div class="tab-content" id="history-tab">
                <div class="history-container">
                    <div class="history-header">
                        <h2 data-lang-key="history-title">操作历史</h2>
                        <button id="refreshHistory" class="refresh-btn">
                            <i class="fas fa-sync-alt"></i>
                            <span data-lang-key="refresh">刷新</span>
                        </button>
                    </div>
                    <div class="history-list" id="historyList">
                        <div class="loading">
                            <i class="fas fa-spinner fa-spin"></i>
                            <span data-lang-key="loading">加载中...</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 设置界面 -->
            <div class="tab-content" id="settings-tab">
                <div class="settings-container">
                    <div class="settings-header">
                        <h2 data-lang-key="settings-title">设置</h2>
                    </div>
                    <div class="settings-content">
                        <div class="setting-item">
                            <label data-lang-key="language-setting">界面语言</label>
                            <select id="languageSelect">
                                <option value="zh-cn">中文</option>
                                <option value="en">English</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label data-lang-key="theme-setting">主题</label>
                            <select id="themeSelect">
                                <option value="light">浅色主题</option>
                                <option value="dark">深色主题</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- 加载提示 -->
        <div class="loading-overlay" id="loadingOverlay">
            <div class="loading-spinner">
                <i class="fas fa-spinner fa-spin"></i>
                <span data-lang-key="processing">处理中...</span>
            </div>
        </div>

        <!-- 通知提示 -->
        <div class="notification" id="notification">
            <span class="notification-text"></span>
            <button class="notification-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- 脚本 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>